/**
 * @copyright   2010-2016, The Titon Project
 * @license     http://opensource.org/licenses/BSD-3-Clause
 * @link        http://titon.io
 */

@include export("modal") {
    $titon-modal-animations: map-get($titon-modal, "animations");

    #{generate-class-name($titon-modal)} {
        @extend %placeholder-full-screen;
        position: fixed;
        opacity: 0;
        visibility: hidden;
        overflow: auto;
        z-index: map-get($titon-settings-zindex, "modal");
        transition: opacity map-get($titon-modal, "transition"), visibility map-get($titon-modal, "transition");
        will-change: transform;
        -webkit-overflow-scrolling: touch;

        &.is-loading {
            #{generate-class-name($titon-modal, "close")} {
                display: none;
            }
        }

        &.is-expanded {
            @extend %placeholder-show;
        }
    }

    #{generate-class-name($titon-modal, "close")} {
        position: absolute;
        background: none;
        border: 0;
        top: theme-setting("medium-padding");
        #{bidi-opposite-alignment()}: theme-setting("medium-padding");
        line-height: 1;
        opacity: theme-setting("opacity");
        padding: theme-setting("small-padding");

        &:hover {
            opacity: 1;
        }
    }

    #{generate-class-name($titon-modal, "outer")} {
        position: relative;
        margin: theme-setting("margin");
        transition: transform map-get($titon-modal, "transition");
    }

    #{generate-class-name($titon-modal, "inner")} {
        position: relative;
    }

    #{generate-class-name($titon-modal, "head")},
    #{generate-class-name($titon-modal, "body")},
    #{generate-class-name($titon-modal, "foot")} {
        padding: theme-setting("medium-padding");
    }

    //-------------------- Modifiers --------------------//

    #{generate-class-name($titon-modal)}.is-fullscreen #{generate-class-name($titon-modal, "outer")} {
        @extend %placeholder-full-screen;
        margin: 0;
        max-width: 100%;
        border-radius: 0;
        transform: translate(0, 0);
    }

    //-------------------- Animations --------------------//

    #{generate-class-name($titon-modal)} {
        @if (is-feature-enabled("all-animations") or index($titon-modal-animations, "from-above")) {
            &.from-above {
                #{generate-class-name($titon-modal, "outer")} {
                    transform: scale(1.3);
                }

                &.show #{generate-class-name($titon-modal, "outer")} {
                    transform: scale(1);
                }
            }
        }

        @if (is-feature-enabled("all-animations") or index($titon-modal-animations, "from-below")) {
            &.from-below {
                #{generate-class-name($titon-modal, "outer")} {
                    transform: scale(0.7);
                }

                &.show #{generate-class-name($titon-modal, "outer")} {
                    transform: scale(1);
                }
            }
        }

        @if (is-feature-enabled("all-animations") or index($titon-modal-animations, "slide-in-top")) {
            &.slide-in-top {
                #{generate-class-name($titon-modal, "outer")} {
                    transform: translateY(-50%);
                }

                &.show #{generate-class-name($titon-modal, "outer")} {
                    transform: translateY(0);
                }
            }
        }

        @if (is-feature-enabled("all-animations") or index($titon-modal-animations, "slide-in-bottom")) {
            &.slide-in-bottom {
                #{generate-class-name($titon-modal, "outer")} {
                    transform: translateY(50%);
                }

                &.show #{generate-class-name($titon-modal, "outer")} {
                    transform: translateY(0);
                }
            }
        }

        @if (is-feature-enabled("all-animations") or index($titon-modal-animations, "slide-in-left")) {
            &.slide-in-left {
                #{generate-class-name($titon-modal, "outer")} {
                    transform: translateX(-25%);
                }

                &.show #{generate-class-name($titon-modal, "outer")} {
                    transform: translateX(0);
                }
            }
        }

        @if (is-feature-enabled("all-animations") or index($titon-modal-animations, "slide-in-right")) {
            &.slide-in-right {
                #{generate-class-name($titon-modal, "outer")} {
                    transform: translateX(25%);
                }

                &.show #{generate-class-name($titon-modal, "outer")} {
                    transform: translateX(0);
                }
            }
        }
    }
}
